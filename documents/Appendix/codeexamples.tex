This appendix contains code fragments, that are too big to be included as part of the report and that can be omitted..

\section {Debug mode for development}\label{appendix:debugmode}
\input{documents/Appendix/debugmode}

\section{The New Profile Selector}

\begin{lstlisting}[caption={The method instantiating the Profile Selector with the correct arguments each time a new user is selected, inside the OnListItemClick listener.}, label={lst:newprofileselectoronitemclick}]
/**
* Updates the ProfileSelector. It is needed when a new user has been selected, as a different
* listener is needed, and the app container has to be reloaded.
* */
private void updatesProfileSelector(){
 mProfileSelectorDialog.setOnListItemClick(new AdapterView.OnItemClickListener() {
  @Override
  public void onItemClick(AdapterView<?> adapterView, View view, int i, long l) {
   ProfileController pc = new ProfileController(mContext);
   mCurrentUser = pc.getProfileById((int) l);
   mProfileSelectorDialog.dismiss();
  
   if (mCurrentUser.getRole() != Profile.Roles.GUARDIAN)
    mProfileSelectorDialog = new GProfileSelector(mContext, mLoggedInGuardian, mCurrentUser);
   else
    mProfileSelectorDialog = new GProfileSelector(mContext, mLoggedInGuardian, null);
  
   mWidgetProfileSelection.setImageBitmap(mCurrentUser.getImage());
  
   updatesProfileSelector();
  
   //Reload the application container, as a new user has been selected.
   reloadApplications();
  }
 });
} 
\end{lstlisting}

\section{Derived class of LoadApplicationTask}

  \begin{lstlisting}[caption={The LoadGirafApplicationTask, derived from LoadApplicationTask. This is the derived class used by GirafFragment to load applications into view. Please note that all comments and the constructor have been removed to make the listing smaller}, label={lst:derivedlat}]
class LoadGirafApplicationTask extends LoadApplicationTask {
	
	@Override
	protected void onPreExecute() {
		if(appsUpdater != null)
		appsUpdater.cancel();
		
		super.onPreExecute();
	}
	
	@Override
	protected HashMap<String, AppInfo> doInBackground(Application... applications) {
		apps = ApplicationControlUtility.getGirafAppsOnDeviceButLauncherAsApplicationList(context);
		applications = apps.toArray(applications);
		appInfos = super.doInBackground(applications);
		
		return appInfos;
	}
	
	@Override
	protected void onPostExecute(HashMap<String, AppInfo> appInfos) {
		super.onPostExecute(appInfos);
		loadedApps = appInfos;
		startObservingApps();
		haveAppsBeenAdded = true;
	}
}
\end{lstlisting}