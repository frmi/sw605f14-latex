This appendix contains code fragments, that are too big to be included as part of the report and that can be omitted..

\section {Debug mode for development}\label{appendix:debugmode}
\input{documents/Appendix/debugmode}


\section{Launching Google Play}

\begin{lstlisting}[caption={The OnClickListener for the googlePlayButton, launching the Play Store correctly}, label={lst:launchergoogleplay}]
/** Attempt to open the Play Store. If it is not installed on the device, open Play Store in the browser instead.*/
googlePlayButton.setOnClickListener(new View.OnClickListener() {
	public void onClick(View v) {
		// Try to start the Google Play app
		try {
			Intent intent = new Intent();
			intent.setData(Uri.parse(MARKET_SEARCH_APP_URI + PUBLISHER_NAME));
			intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TOP);
			startActivity(intent);
			// If Google Play is not found, parse the url for Google Play website
		} 
		catch (android.content.ActivityNotFoundException e) {
			startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(MARKET_SEARCH_WEB_URI + PUBLISHER_NAME)));
		}
	}
}
\end{lstlisting}

\section{The New Profile Selector}

\begin{lstlisting}[caption={The method instantiating the Profile Selector with the correct arguments each time a new user is selected, inside the OnListItemClick listener.}, label={lst:newprofileselectoronitemclick}]
/**
* Updates the ProfileSelector. It is needed when a new user has been selected, as a different
* listener is needed, and the app container has to be reloaded.
* */
private void updatesProfileSelector(){
 mProfileSelectorDialog.setOnListItemClick(new AdapterView.OnItemClickListener() {
  @Override
  public void onItemClick(AdapterView<?> adapterView, View view, int i, long l) {
   ProfileController pc = new ProfileController(mContext);
   mCurrentUser = pc.getProfileById((int) l);
   mProfileSelectorDialog.dismiss();
  
   if (mCurrentUser.getRole() != Profile.Roles.GUARDIAN)
    mProfileSelectorDialog = new GProfileSelector(mContext, mLoggedInGuardian, mCurrentUser);
   else
    mProfileSelectorDialog = new GProfileSelector(mContext, mLoggedInGuardian, null);
  
   mWidgetProfileSelection.setImageBitmap(mCurrentUser.getImage());
  
   updatesProfileSelector();
  
   //Reload the application container, as a new user has been selected.
   reloadApplications();
  }
 });
} 
\end{lstlisting}

\section{Derived class of LoadApplicationTask}

  \begin{lstlisting}[caption={The LoadGirafApplicationTask, derived from LoadApplicationTask. This is the derived class used by GirafFragment to load applications into view. Please note that all comments and the constructor have been removed to make the listing smaller}, label={lst:derivedlat}]
class LoadGirafApplicationTask extends LoadApplicationTask {
	
	@Override
	protected void onPreExecute() {
		if(appsUpdater != null)
		appsUpdater.cancel();
		
		super.onPreExecute();
	}
	
	@Override
	protected HashMap<String, AppInfo> doInBackground(Application... applications) {
		apps = ApplicationControlUtility.getGirafAppsOnDeviceButLauncherAsApplicationList(context);
		applications = apps.toArray(applications);
		appInfos = super.doInBackground(applications);
		
		return appInfos;
	}
	
	@Override
	protected void onPostExecute(HashMap<String, AppInfo> appInfos) {
		super.onPostExecute(appInfos);
		loadedApps = appInfos;
		startObservingApps();
		haveAppsBeenAdded = true;
	}
}
\end{lstlisting}